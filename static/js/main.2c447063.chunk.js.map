{"version":3,"sources":["Camera/index.js","App.tsx","serviceWorker.js","index.tsx"],"names":["Wrapper","props","React","createElement","style","position","top","left","width","height","children","Container","forwardRef","_a","ref","aspectRatio","bottom","right","paddingBottom","ErrorMsg","padding","Cam","mirrored","objectFit","zIndex","transform","Canvas","display","Camera","_b","facingMode","_c","_d","numberOfCamerasCallback","num","_e","errorMessages","noCameraAccessible","permissionDenied","switchCamera","canvas","player","useRef","container","_f","useState","numberOfCameras","setNumberOfCameras","_g","stream","setStream","_h","currentFacingMode","setFacingMode","_j","notSupported","setNotSupported","_k","setPermissionDenied","useEffect","useImperativeHandle","takePhoto","Error","current","playerWidth","videoWidth","playerHeight","videoHeight","playerAR","canvasAR","offsetWidth","offsetHeight","sX","sY","sW","sH","context","getContext","drawImage","toDataURL","console","error","newFacingMode","getNumberOfCameras","initCameraStream","srcObject","getTracks","forEach","track","stop","id","muted","autoPlay","playsInline","displayName","constraints","audio","video","ideal","navigator","mediaDevices","getUserMedia","then","handleSuccess","catch","err","handleError","getWebcam","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","enumerateDevices","r","filter","i","kind","length","name","className","Control","TakePhotoButton","rest","ChangeFacingCameraButton","disabled","ImagePreview","image","backgroundImage","FullScreenImagePreview","log","App","setImage","showImage","setShowImage","camera","onClick","photo","result","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2c447063.chunk.js","sourcesContent":["/* eslint-disable */\nimport React, { useRef, useState, useEffect, useImperativeHandle } from 'react';\nimport './components/Camera/style.css';\n\nvar Wrapper = function (props) {\r\n    // export const Wrapper = React.forwardRef<HTMLDivElement>(({children}, ref) => {\r\n    // export const Wrapper = React.forwardRef<any,any>(({children}, ref) => {\r\n    return (React.createElement(\"div\", { style: {\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n        } }, props.children));\r\n};\r\n// export const Container: React.FC<ContainerIF> = ({ children, aspectRatio }) => {\r\nvar Container = React.forwardRef(function (_a, ref) {\r\n    var children = _a.children, aspectRatio = _a.aspectRatio;\r\n    return (React.createElement(\"div\", { ref: ref, style: aspectRatio === 'cover'\r\n            ? {\r\n                position: \"absolute\",\r\n                bottom: 0,\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n            }\r\n            : {\r\n                position: \"relative\",\r\n                paddingBottom: 100 / +aspectRatio + \"%\"\r\n            } }, children));\r\n});\r\nvar ErrorMsg = function (props) {\r\n    // export const ErrorMsg = React.forwardRef<any>(({children}, ref) => {\r\n    return (React.createElement(\"div\", { style: {\r\n            padding: \"40px\"\r\n        } }, props.children));\r\n};\r\n// export const Cam: React.FC<CamIF> = ({ children, mirrored }) => {\r\n// export const Cam = React.forwardRef<HTMLVideoElement, CamIF>(({children, mirrored}, ref) => {\r\nvar Cam = React.forwardRef(function (_a, ref) {\r\n    var children = _a.children, mirrored = _a.mirrored;\r\n    return (React.createElement(\"video\", { ref: ref, style: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            objectFit: \"cover\",\r\n            zIndex: 0,\r\n            transform: \"rotateY( (\" + (mirrored ? '180deg' : '0deg') + \"))\"\r\n        } }, children));\r\n});\r\n// export const Canvas: React.FC = ({ children }) => {\r\nvar Canvas = React.forwardRef(function (props, ref) {\r\n    return (React.createElement(\"canvas\", { ref: ref, style: {\r\n            display: \"none\"\r\n        } }, props.children));\r\n});\n\nvar Camera = React.forwardRef(function (_a, ref) {\r\n    var _b = _a.facingMode, facingMode = _b === void 0 ? 'user' : _b, _c = _a.aspectRatio, aspectRatio = _c === void 0 ? 'cover' : _c, _d = _a.numberOfCamerasCallback, numberOfCamerasCallback = _d === void 0 ? function (num) { return  num; } : _d, _e = _a.errorMessages, errorMessages = _e === void 0 ? {\r\n        noCameraAccessible: 'No camera device accessible. Please connect your camera or try a different browser.',\r\n        permissionDenied: 'Permission denied. Please refresh and give camera permission.',\r\n        switchCamera: 'It is not possible to switch camera to different one because there is only one video device accessible.',\r\n        canvas: 'Canvas is not supported.',\r\n    } : _e;\r\n    var player = useRef(null);\r\n    var canvas = useRef(null);\r\n    var container = useRef(null);\r\n    var _f = useState(0), numberOfCameras = _f[0], setNumberOfCameras = _f[1];\r\n    var _g = useState(null), stream = _g[0], setStream = _g[1];\r\n    var _h = useState(facingMode), currentFacingMode = _h[0], setFacingMode = _h[1];\r\n    var _j = useState(false), notSupported = _j[0], setNotSupported = _j[1];\r\n    var _k = useState(false), permissionDenied = _k[0], setPermissionDenied = _k[1];\r\n    useEffect(function () {\r\n        numberOfCamerasCallback(numberOfCameras);\r\n    }, [numberOfCameras]);\r\n    useImperativeHandle(ref, function () { return ({\r\n        takePhoto: function () {\r\n            var _a, _b, _c, _d;\r\n            if (numberOfCameras < 1) {\r\n                throw new Error(errorMessages.noCameraAccessible);\r\n            }\r\n            if (canvas === null || canvas === void 0 ? void 0 : canvas.current) {\r\n                var playerWidth = ((_a = player === null || player === void 0 ? void 0 : player.current) === null || _a === void 0 ? void 0 : _a.videoWidth) || 1280;\r\n                var playerHeight = ((_b = player === null || player === void 0 ? void 0 : player.current) === null || _b === void 0 ? void 0 : _b.videoHeight) || 720;\r\n                var playerAR = playerWidth / playerHeight;\r\n                var canvasWidth = ((_c = container === null || container === void 0 ? void 0 : container.current) === null || _c === void 0 ? void 0 : _c.offsetWidth) || 1280;\r\n                var canvasHeight = ((_d = container === null || container === void 0 ? void 0 : container.current) === null || _d === void 0 ? void 0 : _d.offsetHeight) || 1280;\r\n                var canvasAR = canvasWidth / canvasHeight;\r\n                var sX = void 0, sY = void 0, sW = void 0, sH = void 0;\r\n                if (playerAR > canvasAR) {\r\n                    sH = playerHeight;\r\n                    sW = playerHeight * canvasAR;\r\n                    sX = (playerWidth - sW) / 2;\r\n                    sY = 0;\r\n                }\r\n                else {\r\n                    sW = playerWidth;\r\n                    sH = playerWidth / canvasAR;\r\n                    sX = 0;\r\n                    sY = (playerHeight - sH) / 2;\r\n                }\r\n                canvas.current.width = sW;\r\n                canvas.current.height = sH;\r\n                var context = canvas.current.getContext('2d');\r\n                if (context && (player === null || player === void 0 ? void 0 : player.current)) {\r\n                    context.drawImage(player.current, sX, sY, sW, sH, 0, 0, sW, sH);\r\n                }\r\n                var imgData = canvas.current.toDataURL('image/jpeg');\r\n                return imgData;\r\n            }\r\n            else {\r\n                throw new Error(errorMessages.canvas);\r\n            }\r\n        },\r\n        switchCamera: function () {\r\n            if (numberOfCameras < 1) {\r\n                throw new Error(errorMessages.noCameraAccessible);\r\n            }\r\n            else if (numberOfCameras < 2) {\r\n                console.error('Error: Unable to switch camera. Only one device is accessible.'); // console only\r\n            }\r\n            var newFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';\r\n            setFacingMode(newFacingMode);\r\n            return newFacingMode;\r\n        },\r\n        getNumberOfCameras: function () {\r\n            return numberOfCameras;\r\n        },\r\n    }); });\r\n    useEffect(function () {\r\n        initCameraStream(stream, setStream, currentFacingMode, setNumberOfCameras, setNotSupported, setPermissionDenied);\r\n    }, [currentFacingMode]);\r\n    useEffect(function () {\r\n        if (stream && player && player.current) {\r\n            player.current.srcObject = stream;\r\n        }\r\n        return function () {\r\n            if (stream) {\r\n                stream.getTracks().forEach(function (track) {\r\n                    track.stop();\r\n                });\r\n            }\r\n        };\r\n    }, [stream]);\r\n    return (React.createElement(Container, { ref: container, aspectRatio: aspectRatio },\r\n        React.createElement(Wrapper, null,\r\n            notSupported ? React.createElement(ErrorMsg, null, errorMessages.noCameraAccessible) : null,\r\n            permissionDenied ? React.createElement(ErrorMsg, null, errorMessages.permissionDenied) : null,\r\n            React.createElement(Cam, { ref: player, id: \"video\", muted: true, autoPlay: true, playsInline: true, mirrored: currentFacingMode === 'user' ? true : false }),\r\n            React.createElement(Canvas, { ref: canvas }))));\r\n});\r\nCamera.displayName = 'Camera';\r\nvar initCameraStream = function (stream, setStream, currentFacingMode, setNumberOfCameras, setNotSupported, setPermissionDenied) {\r\n    var _a;\r\n    // stop any active streams in the window\r\n    if (stream) {\r\n        stream.getTracks().forEach(function (track) {\r\n            track.stop();\r\n        });\r\n    }\r\n    var constraints = {\r\n        audio: false,\r\n        video: {\r\n            facingMode: currentFacingMode,\r\n            width: { ideal: 1920 },\r\n            height: { ideal: 1920 },\r\n        },\r\n    };\r\n    if ((_a = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getUserMedia) {\r\n        navigator.mediaDevices\r\n            .getUserMedia(constraints)\r\n            .then(function (stream) {\r\n            setStream(handleSuccess(stream, setNumberOfCameras));\r\n        })\r\n            .catch(function (err) {\r\n            handleError(err, setNotSupported, setPermissionDenied);\r\n        });\r\n    }\r\n    else {\r\n        var getWebcam = navigator.getUserMedia ||\r\n            navigator.webkitGetUserMedia ||\r\n            navigator.mozGetUserMedia ||\r\n            navigator.mozGetUserMedia ||\r\n            navigator.msGetUserMedia;\r\n        if (getWebcam) {\r\n            getWebcam(constraints, function (stream) {\r\n                setStream(handleSuccess(stream, setNumberOfCameras));\r\n            }, function (err) {\r\n                handleError(err, setNotSupported, setPermissionDenied);\r\n            });\r\n        }\r\n        else {\r\n            setNotSupported(true);\r\n        }\r\n    }\r\n};\r\nvar handleSuccess = function (stream, setNumberOfCameras) {\r\n    navigator.mediaDevices\r\n        .enumerateDevices()\r\n        .then(function (r) { return setNumberOfCameras(r.filter(function (i) { return i.kind === 'videoinput'; }).length); });\r\n    return stream;\r\n};\r\nvar handleError = function (error, setNotSupported, setPermissionDenied) {\r\n    console.error(error);\r\n    //https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\r\n    if (error.name === 'PermissionDeniedError') {\r\n        setPermissionDenied(true);\r\n    }\r\n    else {\r\n        setNotSupported(true);\r\n    }\r\n};\n\nexport { Camera };\n","import React, { useRef, useState } from 'react';\n// import styled from 'styled-components';\n\nimport { Camera, CameraType } from './Camera';\n\n/* const Wrapper = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n`; */\nconst Wrapper: React.FC/* <WrapperIF> */ = ({ children }) => {\n  return (\n    <div\n      className=\"rcp-wrapper\"\n    >\n      {children}\n    </div>\n\n  )\n}\n\n/* const Control = styled.div`\n  position: fixed;\n  display: flex;\n  right: 0;\n  width: 20%;\n  min-width: 130px;\n  min-height: 130px;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 50px;\n  box-sizing: border-box;\n  flex-direction: column-reverse;\n\n  @media (max-aspect-ratio: 1/1) {\n    flex-direction: row;\n    bottom: 0;\n    width: 100%;\n    height: 20%;\n  }\n\n  @media (max-width: 400px) {\n    padding: 10px;\n  }\n`; */\nconst Control: React.FC/* <ControlIF> */ = ({ children }) => {\n  return (\n    <div\n      className=\"rcp-control\"\n    >\n      {children}\n    </div>\n\n  )\n}\n\n/* const Button = styled.button`\n  outline: none;\n  color: white;\n  opacity: 1;\n  background: transparent;\n  background-color: transparent;\n  background-position-x: 0%;\n  background-position-y: 0%;\n  background-repeat: repeat;\n  background-image: none;\n  padding: 0;\n  text-shadow: 0px 0px 4px black;\n  background-position: center center;\n  background-repeat: no-repeat;\n  pointer-events: auto;\n  cursor: pointer;\n  z-index: 2;\n  filter: invert(100%);\n  border: none;\n\n  &:hover {\n    opacity: 0.7;\n  }\n`; */\nconst Button: React.FC<React.DetailedHTMLProps<React.HTMLAttributes<HTMLButtonElement>, HTMLButtonElement>> = ({ children, ...rest }) => {\n  return (\n    <button\n      className=\"rcp-button\"\n      {...rest}\n    >\n      {children}\n    </button>\n\n  )\n}\n\n/* const TakePhotoButton = styled(Button)`\n  background: url('https://img.icons8.com/ios/50/000000/compact-camera.png');\n  background-position: center;\n  background-size: 50px;\n  background-repeat: no-repeat;\n  width: 80px;\n  height: 80px;\n  border: solid 4px black;\n  border-radius: 50%;\n\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n`; */\nconst TakePhotoButton: React.FC<React.DetailedHTMLProps<React.HTMLAttributes<HTMLButtonElement>, HTMLButtonElement>> = ({ children, ...rest }) => {\n  return (\n    <button\n      className=\"rcp-take-photo-button\"\n      {...rest}\n    >\n      {children}\n    </button>\n\n  )\n}\n\n/* const ChangeFacingCameraButton = styled(Button)`\n  background: url(https://img.icons8.com/ios/50/000000/switch-camera.png);\n  background-position: center;\n  background-size: 40px;\n  background-repeat: no-repeat;\n  width: 40px;\n  height: 40px;\n  padding: 40px;\n  &:disabled {\n    opacity: 0;\n    cursor: default;\n    padding: 60px;\n  }\n  @media (max-width: 400px) {\n    padding: 40px 5px;\n    &:disabled {\n      padding: 40px 25px;\n    }\n  }\n`; */\ninterface ChangeFacingCameraButtonIF extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLButtonElement>, HTMLButtonElement> {\n  disabled?: boolean;\n}\n\nconst ChangeFacingCameraButton: React.FC<ChangeFacingCameraButtonIF> = ({ children, disabled,  ...rest }) => {\n  return (\n    <button\n      {...disabled}\n      className=\"rcp-change-facing-camera-button\"\n      {...rest}\n    >\n      {children}\n    </button>\n\n  )\n}\n\n/* const ImagePreview = styled.div<{ image: string | null }>`\n  width: 120px;\n  height: 120px;\n  ${({ image }) => (image ? `background-image:  url(${image});` : '')}\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n\n  @media (max-width: 400px) {\n    width: 50px;\n    height: 120px;\n  }\n`; */\ninterface ImagePreviewIF extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {\n  image: string | null;\n}\n\nconst ImagePreview: React.FC<ImagePreviewIF> = ({ children, image }) => {\n  return (\n    <div\n      className=\"rcp-image-preview\"\n      style={{\n        backgroundImage: image ? `'url(${image})` : 'none',\n      }}\n    >\n      {children}\n    </div>\n\n  )\n}\n\n/* const FullScreenImagePreview = styled.div<{ image: string | null }>`\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n  position: absolute;\n  background-color: black;\n  ${({ image }) => (image ? `background-image:  url(${image});` : '')}\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n`; */\ninterface FullScreenImagePreviewIF extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {\n  image: string | null;\n}\n\nconst FullScreenImagePreview: React.FC<FullScreenImagePreviewIF> = ({ children, image }) => {\n  console.log(image);\n  return (\n    <div\n      className=\"rcp-full-screen-preview\"\n      style={{\n        backgroundImage: image ? `'url(${image})` : 'none',\n      }}\n    >\n      {children}\n    </div>\n\n  )\n}\n\nconst App = () => {\n  const [numberOfCameras, setNumberOfCameras] = useState(0);\n  const [image, setImage] = useState<string | null>(null);\n  const [showImage, setShowImage] = useState<boolean>(false);\n  const camera = useRef<CameraType>(null);\n\n  return (\n    <Wrapper>\n      {showImage ? (\n        <FullScreenImagePreview\n          image={image}\n          onClick={() => {\n            setShowImage(!showImage);\n          }}\n        />\n      ) : (\n        <Camera\n          ref={camera}\n          aspectRatio=\"cover\"\n          numberOfCamerasCallback={setNumberOfCameras}\n          errorMessages={{\n            noCameraAccessible: 'No camera device accessible. Please connect your camera or try a different browser.',\n            permissionDenied: 'Permission denied. Please refresh and give camera permission.',\n            switchCamera:\n              'It is not possible to switch camera to different one because there is only one video device accessible.',\n            canvas: 'Canvas is not supported.',\n          }}\n        />\n      )}\n      <Control>\n        <ImagePreview\n          image={image}\n          onClick={() => {\n            setShowImage(!showImage);\n          }}\n        />\n        <TakePhotoButton\n          onClick={() => {\n            if (camera.current) {\n              const photo = camera.current.takePhoto();\n              console.log(photo);\n              setImage(photo);\n            }\n          }}\n        />\n        <ChangeFacingCameraButton\n          disabled={numberOfCameras <= 1}\n          onClick={() => {\n            if (camera.current) {\n              const result = camera.current.switchCamera();\n              console.log(result);\n            }\n          }}\n        />\n      </Control>\n    </Wrapper>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}